# VeriFrame

**Decentralized Blender Rendering Platform on Starknet**

VeriFrame is a blockchain-powered platform that enables users to submit Blender rendering jobs and have them processed by a distributed network of workers. Built on Starknet, it provides a trustless and verifiable way to handle 3D rendering tasks with automatic payment distribution.

## 🎯 Overview

VeriFrame connects job creators who need Blender rendering services with workers who provide computational resources. The platform uses smart contracts to escrow payments, verify job completion, and automatically distribute rewards.

### Key Features

- **Decentralized Rendering**: Submit .blend files for distributed processing
- **IPFS Storage**: Decentralized file storage for assets and results
- **Smart Contract Escrow**: Automatic payment handling via Starknet
- **Worker Network**: Distributed processing nodes
- **Web Interface**: Easy-to-use frontend for job management
- **Verifiable Results**: Cryptographically verified job completion

## 🏗️ Architecture

```
┌─────────────────┐    
| Backend(Fastapi)|    ┌─────────────────┐    ┌─────────────────┐
│    Frontend     │    │  Smart Contract │    │     Worker      │
│   (Next.js)     │◄──►│   (Starknet)    │◄──►│   (Python)      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         │                       │                       │
         ▼                       ▼                       ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│      IPFS       │    │   STRK Token    │    │     Blender     │
│   (Storage)     │    │   (Payment)     │    │   (Rendering)   │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 🚀 Quick Start

### Prerequisites

- Node.js v22.15.1+
- Python 3.12.3+
- Blender 4.0.2+
- Cairo/Scarb 2.11.4+
- IPFS node

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/RichoKD/VeriFrame.git
   cd VeriFrame
   ```

2. **Install dependencies**
   ```bash
   # Frontend
   cd frontend
   npm install

   # Backend
   cd ../backend
   python3 -m venv venv
   pip install -r requirements.txt

   # Worker
   cd ../worker
   python3 -m venv venv
   pip install -r requirements.txt

   # Contracts
   cd ../contracts/job_registry
   scarb build
   ```

3. **Configure environment**
   ```bash
   # configure snfoundry.toml with your sepolia account
   # Worker configuration is auto-generated by deployment script
   ./scripts/deploy_job_registry.sh sepolia <account> true
   # Or manually create worker/src/.env with:
   # STARKNET_RPC=https://api.cartridge.gg/x/starknet/sepolia
   # JOB_REGISTRY_ADDRESS=0x03103f3d37047b8bd0680c22a9b8d9502d5d1e34ab12259659dea2f6354ad7e8
   ```

4. **Start services**
   ```bash
   # Start IPFS (if not running)
    cd infra
    docker compose up

   # Start frontend
   cd frontend
   npm run dev

   # Start worker (in another terminal)
   cd worker
   python3 src/main.py
   ```

## 📖 Usage

### For Job Creators

1. **Access the Web Interface**
   - Navigate to `http://localhost:3000`
   - Connect your Starknet wallet

2. **Submit a Rendering Job**
   - Upload your .blend file to IPFS
   - Set reward amount in STRK tokens
   - Specify deadline
   - Submit job to the contract

3. **Monitor Progress**
   - Track job status in the dashboard
   - View completed renders
   - Download results from IPFS

### For Workers

1. **Setup Worker Environment**
   ```bash
   cd worker
   cp src/.env.example src/.env
   # Edit .env with your configuration
   ```

2. **Start Worker**
   ```bash
   python3 src/main.py
   ```

3. **Worker automatically:**
   - Polls for available jobs
   - Downloads .blend files from IPFS
   - Renders using Blender
   - Uploads results to IPFS
   - Submits completion to contract

## 🔧 Development

### Smart Contract Development

```bash
cd contracts/job_registry

# Build contracts
scarb build

# Run tests
scarb test

# Deploy to testnet
./scripts/deploy_job_registry.sh sepolia <account>
```

### Frontend Development

```bash
cd frontend

# Development server
npm run dev

# Build for production
npm run build

# Type checking
npm run lint
```

### Worker Development

```bash
cd worker

# Install development dependencies
pip install -r requirements.txt

# Run with debug output
PYTHONPATH=src python3 src/main.py
```

## 🧪 Testing

### Contract Tests

```bash
cd contracts/job_registry
scarb test create_job  # Test specific function
scarb test            # Run all tests
```

### Integration Tests

```bash
# Test contract deployment
./scripts/deploy_job_registry.sh sepolia <account>

# Test worker functionality
cd worker
python3 src/main.py
```

## 📁 Project Structure

```
VeriFrame/
├── contracts/          # Cairo smart contracts
│   └── job_registry/   # Main job registry contract
├── frontend/           # Next.js web interface
├── worker/             # Python worker nodes
├── scripts/            # Deployment and utility scripts
├── docs/               # Documentation
├── infra/              # Infrastructure configuration
└── shared/             # Shared utilities and types
```

## 🔗 Contract Addresses

### Sepolia Testnet
- **Job Registry**: `0x03103f3d37047b8bd0680c22a9b8d9502d5d1e34ab12259659dea2f6354ad7e8`
- **STRK Token**: `0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d`

### Network Configuration
- **RPC**: `https://api.cartridge.gg/x/starknet/sepolia`
- **Block Explorer**: [StarkScan](https://sepolia.starkscan.co/)

## 🛠️ Tools & Dependencies

See [TOOL_VERSIONS.md](./TOOL_VERSIONS.md) for complete version information.

### Core Technologies
- **Starknet**: Smart contract platform
- **Cairo**: Smart contract language
- **IPFS**: Decentralized storage
- **Next.js**: Frontend framework
- **Blender**: 3D rendering engine

## 📚 Documentation

- [Architecture](./docs/architecture.md) - System design and components
- [Contracts](./docs/contracts.md) - Smart contract documentation
- [Frontend Architecture](./docs/frontend-architecture.md) - UI/UX design
- [Worker Documentation](./docs/worker.md) - Worker node setup
- [Roadmap](./docs/roadmap.md) - Future development plans

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

### Development Guidelines

- Follow Cairo style guide for contracts
- Use TypeScript for frontend development
- Write tests for new functionality
- Update documentation for changes

## 🔒 Security

### Smart Contract Security
- Contracts are tested with comprehensive unit tests
- Access controls implemented for sensitive functions
- Reentrancy protection where applicable

### Worker Security
- File validation before processing
- Sandboxed rendering environment
- Resource limits to prevent abuse

## 🐛 Troubleshooting

### Common Issues

1. **Contract not found error**
   - Ensure you're using the correct network
   - Verify contract address in configuration

2. **IPFS connection failed**
   - Check IPFS daemon is running
   - Verify IPFS API endpoint

3. **Blender rendering failed**
   - Ensure Blender is installed and in PATH
   - Check .blend file compatibility

4. **Worker not finding jobs**
   - Verify contract address configuration
   - Check network connectivity

### Getting Help

- Check the [docs](./docs/) directory
- Review [TOOL_VERSIONS.md](./TOOL_VERSIONS.md) for compatibility
- Open an issue on GitHub

## 📄 License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## 🎉 Acknowledgments

- Starknet team for the robust L2 platform
- IPFS team for decentralized storage
- Blender Foundation for the open-source 3D suite
- Cairo community for development resources

---

**VeriFrame v0.1.0** - Democratizing 3D rendering through blockchain technology